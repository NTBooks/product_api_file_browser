<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz to Certificate Generator - Chainletter API Wiki</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #ffc107;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        .difficulty {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 20px;
            background: #fff3cd;
            color: #856404;
        }

        .back-link {
            margin-bottom: 20px;
        }

        .back-link a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }

        .back-link a:hover {
            text-decoration: underline;
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            color: #2c3e50;
            border-left: 4px solid #ffc107;
            padding-left: 15px;
            margin-bottom: 15px;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }

        .tech-tag {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            color: #495057;
        }

        .file-structure {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9em;
        }

        .concept-box {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }

        .flow-diagram {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }

        .flow-step .step-number {
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="back-link">
            <a href="index.html">‚Üê Back to Examples Index</a>
        </div>

        <h1>üéì Quiz to Certificate Generator</h1>
        <span class="difficulty">Intermediate Level</span>

        <div class="section">
            <h2>Overview</h2>
            <p>This example demonstrates a complete web application that generates personalized certificates for users
                who achieve perfect scores on a quiz. It showcases dynamic content creation, blockchain integration, and
                real-time status monitoring.</p>

            <div class="concept-box">
                <h3>üéØ What This Example Teaches</h3>
                <ul>
                    <li><strong>Web Application Patterns:</strong> Building complete web apps with Express.js</li>
                    <li><strong>Dynamic Content Generation:</strong> Creating personalized certificates using Sharp</li>
                    <li><strong>User Interaction:</strong> Handling form submissions and user input</li>
                    <li><strong>Real-time Status Monitoring:</strong> Checking file upload and stamping progress</li>
                    <li><strong>Error Handling:</strong> Graceful error handling for web applications</li>
                    <li><strong>Export Links:</strong> Using the <code>export-links</code> header for claim links</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>Technology Stack</h2>
            <div class="tech-stack">
                <span class="tech-tag">Express.js</span>
                <span class="tech-tag">Sharp</span>
                <span class="tech-tag">HTML/CSS</span>
                <span class="tech-tag">Axios</span>
                <span class="tech-tag">Form-Data</span>
                <span class="tech-tag">Certificate Generation</span>
                <span class="tech-tag">Real-time Status</span>
            </div>
        </div>

        <div class="section">
            <h2>Application Flow</h2>
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>User enters name and answers quiz questions</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>Server validates perfect score (100% correct)</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>Sharp generates personalized certificate with name and date</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>Certificate uploaded to "Course Complete" collection</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">5</div>
                    <div>User redirected to status page with real-time monitoring</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">6</div>
                    <div>Certificate displayed with blockchain verification details</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>File Structure</h2>
            <div class="file-structure">
                simple_example_2_quiz_to_cert/
                ‚îú‚îÄ‚îÄ server.js # Express server with quiz logic and API integration
                ‚îú‚îÄ‚îÄ index.html # Quiz interface
                ‚îú‚îÄ‚îÄ complete.html # Certificate completion page
                ‚îú‚îÄ‚îÄ package.json # Dependencies
                ‚îú‚îÄ‚îÄ env.example # Environment variables template
                ‚îî‚îÄ‚îÄ README.md # Documentation
            </div>
        </div>

        <div class="section">
            <h2>Key Features</h2>

            <h3>üéØ Perfect Score Requirement</h3>
            <p>Only users with 100% correct answers receive certificates, demonstrating conditional logic and
                validation:</p>
            <div class="code-block">
                if (correctAnswers === quizQuestions.length) {
                // Generate and upload certificate
                } else {
                res.json({ success: false, message: 'Perfect score required' });
                }
            </div>

            <h3>üé® Dynamic Certificate Generation</h3>
            <p>Uses Sharp to create personalized certificates with SVG templates:</p>
            <div class="code-block">
                const svg = `
                &lt;svg width="800" height="600" xmlns="http://www.w3.org/2000/svg"&gt;
                &lt;rect width="100%" height="100%" fill="#f8f9fa"/&gt;
                &lt;text x="400" y="200" text-anchor="middle" font-size="24"&gt;
                Certificate of Completion
                &lt;/text&gt;
                &lt;text x="400" y="250" text-anchor="middle" font-size="18"&gt;
                This is to certify that ${name}
                &lt;/text&gt;
                &lt;text x="400" y="300" text-anchor="middle" font-size="16"&gt;
                has successfully completed the quiz on ${new Date().toLocaleDateString()}
                &lt;/text&gt;
                &lt;/svg&gt;
                `;
            </div>

            <h3>üìä Real-time Status Monitoring</h3>
            <p>Demonstrates how to check file status and blockchain verification:</p>
            <div class="code-block">
                // Get file info from group
                const groupResponse = await fetch(`/api/file-info/${hash}`);

                // Get blockchain details with export links
                const blockchainResponse = await fetch(`/api/file-status/${hash}`);
            </div>

            <h3>üîó Export Links Integration</h3>
            <p>Uses the <code>export-links</code> header to retrieve claim links for certificates:</p>
            <div class="code-block">
                const response = await axios.get(`${API_BASE_URL}/webhook/${API_KEY}`, {
                headers: {
                'secret-key': API_SECRET,
                'network': API_NETWORK,
                'hash': hash,
                'export-links': 'true'
                }
                });
            </div>
        </div>

        <div class="section">
            <h2>API Integration Patterns</h2>

            <h3>üîë Authentication & Headers</h3>
            <p>Demonstrates proper API authentication and header usage:</p>
            <div class="code-block">
                headers: {
                'secret-key': API_SECRET,
                'group-id': 'Course Complete',
                'network': API_NETWORK
                }
            </div>

            <h3>üìÅ Collection Management</h3>
            <p>Creates and manages the "Course Complete" collection for storing certificates.</p>

            <h3>üîÑ Error Handling</h3>
            <p>Comprehensive error handling for both API failures and user input validation:</p>
            <div class="code-block">
                try {
                // API call
                } catch (error) {
                console.error('Upload error:', error);
                res.status(500).json({
                success: false,
                message: 'Failed to generate certificate'
                });
                }
            </div>

            <h3>üì± User Experience</h3>
            <p>Provides clear feedback and status updates throughout the process.</p>
        </div>

        <div class="section">
            <h2>Advanced Concepts</h2>

            <h3>üñºÔ∏è Image Processing</h3>
            <p>Uses Sharp for server-side image generation and manipulation, creating professional-looking certificates.
            </p>

            <h3>üåê CORS & Proxy Handling</h3>
            <p>Includes IPFS proxy endpoint to handle CORS issues when loading certificate images:</p>
            <div class="code-block">
                app.get('/ipfs', async (req, res) => {
                const { url } = req.query;
                const response = await axios.get(url, {
                responseType: 'stream',
                headers: {
                'User-Agent': 'Mozilla/5.0 (compatible; FileBrowser/1.0)'
                }
                });
                // Stream response to client
                });
            </div>

            <h3>üì• File Download</h3>
            <p>Implements certificate download functionality using Pinata gateway URLs.</p>
        </div>

        <div class="section">
            <h2>Use Cases</h2>
            <ul>
                <li><strong>Educational Platforms:</strong> Certificate generation for online courses</li>
                <li><strong>Training Programs:</strong> Completion certificates for training modules</li>
                <li><strong>Assessment Systems:</strong> Blockchain-verified achievement certificates</li>
                <li><strong>Web Application Patterns:</strong> Template for building similar applications</li>
                <li><strong>Dynamic Content:</strong> Example of server-side content generation</li>
            </ul>
        </div>

        <div class="section">
            <h2>Quiz Questions</h2>
            <p>The demo includes three simple addition questions to test basic mathematical skills:</p>
            <ol>
                <li>What is 5 + 3? (Answer: 8)</li>
                <li>What is 12 + 7? (Answer: 19)</li>
                <li>What is 25 + 15? (Answer: 40)</li>
            </ol>
            <div class="highlight">
                <strong>Customization:</strong> You can easily modify the questions by editing the
                <code>quizQuestions</code> array in <code>server.js</code>.
            </div>
        </div>

        <div class="section">
            <h2>Certificate Features</h2>
            <ul>
                <li><strong>Personalized:</strong> Includes user's name and current date</li>
                <li><strong>Professional Design:</strong> Clean SVG template with proper styling</li>
                <li><strong>Unique ID:</strong> Each certificate has a timestamp-based identifier</li>
                <li><strong>High Quality:</strong> Generated as PNG using Sharp</li>
                <li><strong>Blockchain Verified:</strong> Stamped on the blockchain for authenticity</li>
                <li><strong>Downloadable:</strong> Users can download their certificates</li>
            </ul>
        </div>

        <div class="section">
            <h2>Next Steps</h2>
            <p>After understanding this example, you can explore:</p>
            <ul>
                <li><a href="example-1-file-browser.html">Example 1</a> - Advanced React patterns and file management
                </li>
                <li><a href="example-4-events.html">Example 4</a> - Real-time event monitoring</li>
                <li><a href="example-5-cost-savings.html">Example 5</a> - Cost optimization strategies</li>
            </ul>
        </div>

        <div class="section">
            <h2>Running the Example</h2>
            <div class="code-block">
                # Install dependencies
                npm install

                # Configure environment variables
                cp env.example .env
                # Edit .env with your API credentials

                # Start the server
                npm start

                # Access the application
                # Open http://localhost:3002 in your browser
            </div>

            <div class="highlight">
                <strong>Environment Variables Required:</strong>
                <ul>
                    <li><code>API_KEY</code> - Your Chainletter API key</li>
                    <li><code>API_SECRET</code> - Your Chainletter API secret</li>
                    <li><code>API_NETWORK</code> - Network type (public/private)</li>
                    <li><code>PORT</code> - Server port (default: 3002)</li>
                </ul>
            </div>
        </div>
    </div>
</body>

</html>